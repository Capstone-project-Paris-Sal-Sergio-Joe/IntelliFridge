<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:include="partials/partials.html :: head(${currentFridge.name})">
    <meta charset="UTF-8">
    <title>Fridge</title>
</head>
<style>
    .foodItem {
        display: none;
        border: 5px solid red;
    }

    #addFoodForm {
        display: none;
    }
</style>
<body>
<nav th:insert="partials/partials.html :: navbar"></nav>
<h1 th:text="${currentFridge.name}"></h1>


<!--Table-->
<div class="container my-2">
    <table id="foodTable" border="1" class="table table-striped table-responsive-md">
        <thead>
        <tr>
            <th><a class="btn btn-success text-right" target="_blank">Food Name</a></th>
            <th><a class="btn btn-success text-right" target="_blank">Created Date</a></th>
            <th><a class="btn btn-success text-right" target="_blank">Fridge or freezer</a></th>
            <th><a class="btn btn-success text-right" target="_blank">Actions</a></th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="food : ${foodInFridge}">
            <td th:text="${food.name}" class="food-name"><p>"help"</p></td>
            <td class="fridgeImageUrl"><p>"help"</p></td>
            <td th:text="${food.dateAdded}"></td>
            <td th:text="${food.isInFreezer()}"></td>
            <td>
                <form>
                    <button class="btn btn-warning">SMS Updates ?</button>
                </form>
                <form th:action="@{'/fridge/' + ${currentFridge.id} + '/food/' + ${food.id} + '/delete'}"
                      th:method="POST">
                    <button class="btn btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!--add-food form-->
<button class="btn btn-primary" id="addFoodButton">Add Food</button>
<form th:action="@{'/fridge/' + ${currentFridge.id} + '/add-food'}" th:method="post" th:object="${food}" id="addFoodForm">

    <!--    Hidden date added-->
    <input th:type="hidden" th:field="*{dateAdded}">

    <label>Food Name</label>
    <input type="text" placeholder="Food name..." id="foodSearch" th:field="*{name}" required>

    <div id="foodResults">
        <div th:each="shelfLife : ${shelfLives}" class="foodItem">
            <div th:id="${shelfLife.name}" class="foodImageURL"></div>
            <h3 th:text="${shelfLife.name}" class="foodName"></h3>
        </div>
    </div>

    <div id="addedFood"></div>
</form>


<th:block th:insert="partials/partials.html :: bootstrap-js"/>
<!--cdn datatable links for sorting -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--sort/search bar for table-->
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

<!--Not needed for search/sort table - alignment right and center-->
<!--        <script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap.min.js"></script>-->
<script type="text/javascript">
    $(document).ready(function () {
        // Initialize table
        let table = $('#foodTable').DataTable();
    });
</script>
<script src="/js/jquery.js"></script>
<script src="/keys.js"></script>
<script src="/js/add-food.js"></script>
<script src="/js/fridge.js"></script>
</body>
</html>
