<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:include="partials/partials.html :: head('Profile')"></head>
    <link rel="stylesheet" href="css/profile.css">
</head>
<body>

<nav th:insert="partials/partials.html :: navbar"></nav>

<h1>Profile</h1>
<h2 th:text="${user.username}"></h2>
<img th:src="${user.photosImagePath}" />
<br>
<button id="edit" >edit</button>
<form name="edit" class="hidden" id="editForm" method="post">



    <!-- Profile Picture -->
    <div class="profile">
        <img id="profilePic" src="img/default.jpg">
    </div>

    <div>
        <!--    <div style="width: 100%;text-align: center;margin: 20px 0;color: #aaa">-->

        <!--  Choose your own default picture <br>-->
        <script type="text/javascript" src="http://api.filestackapi.com/filestack.js"></script>
        <input type="filepicker" data-fp-apikey="AHtDDvPETGSXpr1bg2Isxz" onchange="loadImage(event.fpfile.url)">
    </div>

    <script type="text/javascript">
        function loadImage(imageURL) {
            document.getElementById("profilePic").src = imageURL;
        }
    </script>






    <ul>
        <li>
            <label for="username">Username</label>
            <input name="username" type="text" th:value="${user.username}" id="username"/>
        </li>
        <li>
            <label for="email">Email</label>
            <input name="email" type="text" th:value="${user.email}" id="email"/>
        </li>
        <li>
            <label for="phoneNumber">phoneNumber</label>
            <input name="phoneNumber" type="text" th:value="${user.phoneNumber}" id="phoneNumber"/>
        </li>

<!--upload image form-->
            <form th:action="@{/users/save}"
                  th:object="${user}" method="post"
                  enctype="multipart/form-data">

                <div>

                    <label>Profile Picture : </label>
                    <input type="file" name="image" accept="image/png, image/jpeg"   />
                    <img th:src="${user.photosImagePath}" />

                </div>

            </form>
 <!--upload image form-->

<br>
        <button type="submit" id="form-btn">Submit</button>
    </ul>
</form>

<!-- upload image form -->
<!--            <form th:action="@{/users/save}"-->
<!--                  th:object="${user}" method="post"-->
<!--                  enctype="multipart/form-data"-->
<!--            >-->
<!--                ...-->
<!--                <div>-->

<!--                    <label>Photos: </label>-->
<!--                    <input type="file" name="image" accept="image/png, image/jpeg" />-->

<!--                </div>-->
<!--                ...-->
<!--            </form>-->

<!--upload image form-->




<hr><hr>
<br><br>
<h3>Fridge List:</h3>
<div th:each="fridge : ${fridge}">

<p th:text="${fridge.name}"></p>
    <form th:action="@{'/fridge/' + ${fridge.id}}" th:method="GET">
        <button>View Fridge</button>
        <br><hr>
    </form>
</div>
<th:block th:insert="partials/partials.html :: bootstrap-js"/>
<script src="js/jquery.js"></script>
<script src="js/profile.js"></script>
</body>
</html>